Shader "Sprite/MaskFront"
{
    Properties
    {
        _uMainTex("Main Texture", 2D) = "white" {}
        _Cutoff ("Mask alpha cutoff", float) = 0.0
    }

    SubShader
    {
        Tags
        {
            "Queue"="Transparent"
        }


        Pass
        {   
			Blend One Zero
			ColorMask 0
			Cull Off
			ZWrite Off

            Stencil 
            {
				Ref 0
                Comp always
                Pass decrSat
				Fail keep
				ZFail keep
            }
			
            CGPROGRAM
        	    uniform sampler2D _uMainTex;
                uniform float _Cutoff;
          	    struct appdata_t{
					float4 position : POSITION;                 
				    float2 uv : TEXCOORD0;
				};
				struct v2f{
					float4 position : SV_POSITION;
					float2 uv : TEXCOORD0;
				};
				v2f vert(appdata_t v){
					v2f o;
					o.position = mul(uMVPMatrix, v.position);                 
					o.uv = v.uv;
					return o;
				}

                fixed4 frag(v2f i) : SV_Target{     
                    fixed4 c = tex2D(_uMainTex,i.uv);
                    clip (c.a - _Cutoff); 
                    return float4(1,1,1,0.2);
                }
            ENDCG
        }
    }
}
